(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"3ef5":function(t,e,n){var a=n("24fb");e=a(!1),e.push([t.i,"ul[data-v-79c80705]{padding:0;list-style-type:none}img[data-v-79c80705]{width:100%;display:block}.items[data-v-79c80705]{display:flex;flex-wrap:wrap}.item[data-v-79c80705]{width:100px;height:100px}.btn[data-v-79c80705]{cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:30px;border:2px dashed #ccc;box-sizing:border-box}.input-box[data-v-79c80705]{padding:10px;border:1px solid #ccc}",""]),t.exports=e},"6c7c":function(t,e,n){"use strict";n.r(e);var a=n("cf12"),i=n("be8f");for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);n("d4e4");var r=n("f0c5"),u=Object(r["a"])(i["default"],a["b"],a["c"],!1,null,"79c80705",null,!1,a["a"],void 0);e["default"]=u.exports},be8f:function(t,e,n){"use strict";n.r(e);var a=n("f958"),i=n.n(a);for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);e["default"]=i.a},cf12:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){}));var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",{staticClass:"content"},[t.showLogin?n("div",[n("div",{staticClass:"input-box"},[n("v-uni-input",{staticClass:"uni-input",attrs:{value:t.username,placeholder:"账号"}})],1),n("div",{staticClass:"input-box"},[n("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSubmit.apply(void 0,arguments)}}},[t._v("登录")])],1)]):t._e(),n("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleLogout.apply(void 0,arguments)}}},[t._v("退出登录")]),t.showLogin?t._e():n("ul",{staticClass:"items"},[t._l(t.items,(function(e,a){return n("li",{key:a,staticClass:"item"},[n("img",{attrs:{src:e,alt:""}}),n("v-uni-button",{on:{click:function(n){arguments[0]=n=t.$handleEvent(n),t.handleRemove(e)}}},[t._v("删除")])],1)})),n("li",{staticClass:"item btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleUpload.apply(void 0,arguments)}}},[t._v("+")])],2)],1)},i=[]},d4e4:function(t,e,n){"use strict";var a=n("d6f3"),i=n.n(a);i.a},d6f3:function(t,e,n){var a=n("3ef5");a.__esModule&&(a=a.default),"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var i=n("4f06").default;i("104b177d",a,!0,{sourceMap:!1,shadowMode:!1})},e1bd:function(t,e,n){"use strict";n.r(e),n.d(e,"nanoid",(function(){return u})),n.d(e,"customAlphabet",(function(){return r})),n.d(e,"customRandom",(function(){return o})),n.d(e,"urlAlphabet",(function(){return a})),n.d(e,"random",(function(){return i}));let a="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",i=t=>crypto.getRandomValues(new Uint8Array(t)),o=(t,e,n)=>{let a=(2<<Math.log(t.length-1)/Math.LN2)-1,i=-~(1.6*a*e/t.length);return(o=e)=>{let r="";while(1){let e=n(i),u=i;while(u--)if(r+=t[e[u]&a]||"",r.length===o)return r}}},r=(t,e=21)=>o(t,e,i),u=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((t,e)=>(e&=63,t+=e<36?e.toString(36):e<62?(e-26).toString(36).toUpperCase():e>62?"-":"_",t),"")},f958:function(t,e,n){"use strict";(function(t){n("7a82");var a=n("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=a(n("c7eb")),o=a(n("1da1")),r=a(n("2909")),u=a(n("3835"));n("d3b7"),n("4de4"),n("99af"),n("d81d"),n("7db0"),n("3ca3"),n("ddb0");var l=n("e1bd"),c=function(t){return t.split(".").pop()},s={data:function(){return{showLogin:!localStorage.getItem("username"),username:"tomcat",items:[]}},onLoad:function(){this.loadData()},methods:{handleLogout:function(){localStorage.removeItem("username"),this.showLogin=!0,this.loadData()},handleRemove:function(e){var n=this,a=localStorage.getItem("username"),i=t.database().collection("user");wx.showLoading(),i.where({username:a}).get().then((function(t){var n,a=(0,u.default)(t.result.data,1),i=a[0],o=null!==(n=null===i||void 0===i?void 0:i.images)&&void 0!==n?n:[];return o.filter((function(t){return t!==e}))})).then((function(t){return i.where({username:a}).update({images:t}),e})).then((function(e){var n=t.importObject("action");return n.delete(e)})).then((function(){n.loadData()})).finally((function(){wx.hideLoading()}))},loadData:function(){var e=this,n=localStorage.getItem("username"),a=t.database().collection("user");a.where({username:n}).get().then((function(t){var n,a=(0,u.default)(t.result.data,1),i=a[0];e.items=null!==(n=null===i||void 0===i?void 0:i.images)&&void 0!==n?n:[]}))},saveImage:function(e,n){var a=this,i=t.database().collection("user");i.where({username:e}).get().then((function(t){var e=(0,u.default)(t.result.data,1),n=e[0];return n.images})).then((function(t){return i.where({username:e}).update({images:[].concat((0,r.default)(n),(0,r.default)(t))})})).then((function(){return a.loadData()})).finally((function(){wx.hideLoading()}))},handleUpload:function(){var e=this;uni.chooseImage({count:10,success:function(){var n=(0,o.default)((0,i.default)().mark((function n(a){var o,r,u,s;return(0,i.default)().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(o=102400,0!==a.tempFilePaths.length){n.next=3;break}return n.abrupt("return");case 3:if(r=a.tempFiles.map((function(t,e){return{file:t,tempFilePath:a.tempFilePaths[e]}})),u=!!r.find((function(t){return t.file.size>o})),!u){n.next=8;break}return alert("狗东西，这么大文件你要死啊？不能大于100kb"),n.abrupt("return");case 8:wx.showLoading(),s=r.map((function(e){var n=e.tempFilePath,a=c(e.file.name),i=(0,l.nanoid)(),o="/images/".concat(i,".").concat(a);return t.uploadFile({filePath:n,cloudPath:o,cloudPathAsRealPath:!0,onUploadProgress:function(t){Math.round(100*t.loaded/t.total)}})})),Promise.all(s).then((function(t){a.fileID;var n=localStorage.getItem("username"),i=t.map((function(t){return t.fileID}));e.saveImage(n,i)})).finally(wx.hideLoading);case 11:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}()})},isExist:function(t){},login:function(t){localStorage.setItem("username",t),this.showLogin=!1,this.loadData()},register:function(t){this.login(t)},handleSubmit:function(){var t=this.username;this.isExist(t)?this.login(t):this.register(t)}}};e.default=s}).call(this,n("a9ff")["default"])}}]);