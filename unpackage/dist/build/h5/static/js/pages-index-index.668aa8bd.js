(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"2c31":function(t,e,a){"use strict";var n=a("63b8"),i=a.n(n);i.a},"508d":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"content"},[t.showLogin?a("div",[a("div",{staticClass:"input-box"},[a("v-uni-input",{staticClass:"uni-input",attrs:{value:t.username,placeholder:"账号"}})],1),a("div",{staticClass:"input-box"},[a("v-uni-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleSubmit.apply(void 0,arguments)}}},[t._v("登录")])],1)]):t._e(),t.showLogin?t._e():a("ul",{staticClass:"items"},[t._l(t.items,(function(t,e){return a("li",{key:e,staticClass:"item"},[a("img",{attrs:{src:t,alt:""}})])})),a("li",{staticClass:"item btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.handleUpload.apply(void 0,arguments)}}},[t._v("+")])],2)])},i=[]},"63b8":function(t,e,a){var n=a("98ec");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("1638e744",n,!0,{sourceMap:!1,shadowMode:!1})},"6c7c":function(t,e,a){"use strict";a.r(e);var n=a("508d"),i=a("be8f");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("2c31");var s=a("f0c5"),l=Object(s["a"])(i["default"],n["b"],n["c"],!1,null,"05134b18",null,!1,n["a"],void 0);e["default"]=l.exports},"98ec":function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"ul[data-v-05134b18]{padding:0;list-style-type:none}img[data-v-05134b18]{width:100%;display:block}.items[data-v-05134b18]{display:flex;flex-wrap:wrap}.item[data-v-05134b18]{width:100px;height:100px}.btn[data-v-05134b18]{cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:30px;border:2px dashed #ccc;box-sizing:border-box}.input-box[data-v-05134b18]{padding:10px;border:1px solid #ccc}",""]),t.exports=e},be8f:function(t,e,a){"use strict";a.r(e);var n=a("f958"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},f958:function(t,e,a){"use strict";(function(t){a("7a82");var n=a("4ea4").default;Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("99af"),a("caad"),a("2532");var i=n(a("2909")),o=n(a("3835")),s={data:function(){return{showLogin:!localStorage.getItem("username"),username:"tomcat",items:[]}},onLoad:function(){this.loadData()},methods:{loadData:function(){var e=this,a=localStorage.getItem("username"),n=t.database().collection("user");n.where({username:a}).get().then((function(t){var a,n=(0,o.default)(t.result.data,1),i=n[0];e.items=null!==(a=null===i||void 0===i?void 0:i.images)&&void 0!==a?a:[]}))},saveImage:function(e,a){var n=this,s=t.database().collection("user");s.where({username:e}).get().then((function(t){var e=(0,o.default)(t.result.data,1),a=e[0];return a.images})).then((function(t){return s.where({username:e}).update({images:[].concat((0,i.default)(t),[a])})})).then((function(){return n.loadData()})).finally((function(){wx.hideLoading()}))},handleUpload:function(){var e=this;uni.chooseImage({count:1,success:function(a){if(0!==a.tempFilePaths.length){var n=a.tempFiles[0];if(n.size>102400)alert("狗东西，这么大文件你要死啊？不能大于100kb");else{wx.showLoading();var i=a.tempFilePaths[0],o="/images/".concat(n.name);t.uploadFile({filePath:i,cloudPath:o,cloudPathAsRealPath:!0,onUploadProgress:function(t){Math.round(100*t.loaded/t.total)}}).then((function(t){var a=t.fileID,n=localStorage.getItem("username");e.saveImage(n,a)})).catch((function(t){t.message.includes("policy_does_not_allow_file_overwrite")&&alert("文件重名"),wx.hideLoading()}))}}}})},isExist:function(t){},login:function(t){localStorage.setItem("username",t),this.showLogin=!1,this.loadData()},register:function(t){this.login(t)},handleSubmit:function(){var t=this.username;this.isExist(t)?this.login(t):this.register(t)}}};e.default=s}).call(this,a("a9ff")["default"])}}]);